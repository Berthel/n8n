{
  "createdAt": "2025-01-25T08:07:16.055Z",
  "updatedAt": "2025-01-27T04:51:03.000Z",
  "id": "f3wAU7NkliO2ICbP",
  "name": "Find places",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "0f0682c1-d111-4b77-9f7a-ea842ac791d5",
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        420,
        200
      ],
      "credentials": {
        "openAiApi": {
          "id": "ZjiR1Y4tdzymEK1L",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "name": "user_documents",
        "description": "Contains all the user's documents that you can check for context to answer user questions. Before beginning, scan and identify all relevant occurrences of the topic or subject matter to ensure a comprehensive overview of the best descriptions. Use this overview to prioritize and refine responses effectively.",
        "topK": 20
      },
      "id": "23d92972-062e-47b2-8977-750dbf1f8796",
      "name": "Retrieve Documents",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1,
      "position": [
        200,
        20
      ]
    },
    {
      "parameters": {
        "content": "## Agent Tools for RAG",
        "height": 528.85546469693,
        "width": 583.4552380860637,
        "color": 4
      },
      "id": "6fff8a1a-ede9-436d-a304-1ec381d37379",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        20,
        -100
      ]
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "f40abeb6-032b-4eaa-aa36-a68e45e7ef28",
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        240,
        300
      ],
      "credentials": {
        "openAiApi": {
          "id": "ZjiR1Y4tdzymEK1L",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## RAG AI Agent with Chat Interface",
        "height": 464.8027193303974,
        "width": 692.7866482806627
      },
      "id": "de1980e6-af88-4c9d-9ba9-c0ad9d9ea8e4",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -680,
        -40
      ]
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! ðŸ‘‹\nWhich historical site in Tavira do you want me to tell you about?",
        "options": {
          "inputPlaceholder": "Type your question..",
          "title": "Hi there! ðŸ‘‹"
        }
      },
      "id": "b4f80713-a6e4-42fb-ba5b-557de7a82bef",
      "name": "When chat message received",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -620,
        40
      ],
      "webhookId": "d58e0912-e348-423d-a98c-d34f4c8e88c0"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('When chat message received').item.json.chatInput }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=# Role\nYou are a Content Creator assistant for Heritage Navigator, an app that helps historical interested visitors discover and understand local historical sites. Your task is to find and suggest specific historical sites, targeting adult cultural travelers (45-70 years) seeking authentic experiences.\n\n# Instructions\n- The tool user_documents is your primary source for information\n- The tool Wikipedia is your secondary source for infomation, and you can use the Wikipedia tool if you don't find the information you need in the user_documents\n- Don't hallucinate.\n- Do your best to find the information you need to fullfill the task, and if you don't find the information you need it is OK to tell me that you don't have the information \n\n# Rules\n- Always use local place names in their original language and do not translate them to English. For example, use \"KÃ¸benhavn\" instead of \"Copenhagen\", \"Kronborg\" instead of \"Elsinore Castle\", \"SÃ£o Jorge\" instead of \"St. George\", etc.\n\n# Output\n\nMake a list of sites with at short description. Include the source for your information for each site\n\n\n"
        }
      },
      "id": "aa6980d8-befb-4eb2-8d48-d55d6137c177",
      "name": "RAG AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        -300,
        40
      ]
    },
    {
      "parameters": {
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "id": "0fb12e0d-51c5-4843-9a11-88fcad850a13",
      "name": "Supabase Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        80,
        180
      ],
      "credentials": {
        "supabaseApi": {
          "id": "1Yc1VOr8K1yXCO1Q",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -220,
        260
      ],
      "id": "9d246f0e-6c16-4770-81f3-56ad4fbb67dc",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "EzZYFEVPXxVDpNLe",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.2,
      "position": [
        -1220,
        140
      ],
      "id": "9a4f78ce-2dac-4917-b381-2a497877ad9b",
      "name": "Anthropic Chat Model",
      "credentials": {
        "anthropicApi": {
          "id": "ADl7Wvu9YXxKvVtY",
          "name": "Anthropic account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "9235213e-aa44-4210-87ba-eca5dbb725dc",
      "name": "OpenAI Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        -1160,
        360
      ],
      "credentials": {
        "openAiApi": {
          "id": "ZjiR1Y4tdzymEK1L",
          "name": "OpenAi account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolWikipedia",
      "typeVersion": 1,
      "position": [
        -40,
        260
      ],
      "id": "a8b8966e-6f9d-44d2-966e-7ee4feaf7437",
      "name": "Wikipedia"
    },
    {
      "parameters": {
        "model": "gpt-4o",
        "options": {}
      },
      "id": "d2239adc-b125-4c65-a8d3-9b67f916180d",
      "name": "OpenAI",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        -1080,
        140
      ],
      "credentials": {
        "openAiApi": {
          "id": "ZjiR1Y4tdzymEK1L",
          "name": "OpenAi account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Below is a story that needs to be retold in a more engaging way for an audience aged 45-70. Use vivid language and descriptive details to make it captivating, but do not alter any of the factual information:\n{{ $json.output }}",
        "messages": {
          "messageValues": [
            {
              "message": "You are a storyteller skilled at crafting engaging and vivid narratives for an audience aged 45-70. Your goal is to retell stories in a captivating way while preserving all factual information and respecting the historical authenticity of the content."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        280,
        -380
      ],
      "id": "8c212a0f-68ff-48b9-9a22-0257e983e9f2",
      "name": "Basic LLM Chain",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.2,
      "position": [
        -940,
        360
      ],
      "id": "df5446da-abf5-4698-bdd2-ba143065e236",
      "name": "Anthropic Chat Model1",
      "credentials": {
        "anthropicApi": {
          "id": "ADl7Wvu9YXxKvVtY",
          "name": "Anthropic account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "model": "=perplexity/llama-3.1-sonar-large-128k-online",
        "options": {}
      },
      "id": "dd77dd02-f963-49c5-a1cd-efacb7bbf8f6",
      "name": "Openrouter Perplexity",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        -940,
        -160
      ],
      "credentials": {
        "openAiApi": {
          "id": "7oESUrXOypaiYfq2",
          "name": "openrouter"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "model": "=anthropic/claude-3.5-sonnet:beta",
        "options": {}
      },
      "id": "2723cc89-6439-4e04-a52c-7c60f8bd2e85",
      "name": "Openrouter Claude",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        -420,
        240
      ],
      "credentials": {
        "openAiApi": {
          "id": "7oESUrXOypaiYfq2",
          "name": "openrouter"
        }
      }
    }
  ],
  "connections": {
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Retrieve Documents",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Documents": {
      "ai_tool": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "RAG AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_vectorStore": [
        [
          {
            "node": "Retrieve Documents",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        []
      ]
    },
    "Wikipedia": {
      "ai_tool": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "RAG AI Agent": {
      "main": [
        []
      ]
    },
    "Anthropic Chat Model1": {
      "ai_languageModel": [
        []
      ]
    },
    "Openrouter Claude": {
      "ai_languageModel": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "57a38800-a729-4ef0-8552-2ef1c9a7a81b",
  "triggerCount": 2,
  "shared": [
    {
      "createdAt": "2025-01-25T08:07:16.058Z",
      "updatedAt": "2025-01-25T08:07:16.058Z",
      "role": "workflow:owner",
      "workflowId": "f3wAU7NkliO2ICbP",
      "projectId": "rkqKISKa14HwF9Xd"
    }
  ],
  "tags": [
    {
      "createdAt": "2025-01-27T04:16:13.710Z",
      "updatedAt": "2025-01-27T04:16:13.710Z",
      "id": "UKDDqdJlo9qVGTuK",
      "name": "navigator"
    }
  ]
}